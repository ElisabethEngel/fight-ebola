<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <link href="css/style.css"  type="text/css" rel="stylesheet"/>

    <script type="text/javascript" src="js/main.js"></script>

    <title>Fight the Ebola Virus</title>
  </head>
<body>
    <h1 style="text-align: center">Fight the Ebola Virus</h1>

    <div class="karte">

        <div class="kartenwrapper">
            <div class="kartenvertical">
                <div class="kartencontent">


                <!-- GESAMT FäLLE -->
                <div>
                    <div class="circle circle-fall circle-gesamtfall"
                         style="left: -100px; right: auto; top: auto; bottom: -100px;/* width: 49.0935%;*/">
                        <div>
                            <span class="gesamt">Gesamt</span>
                            <br>
                            <span class="gesamtinfo">Fälle ohne Kongo</span>
                            <br>
                            <span class="gesamtzahl">4269</span></div>
                    </div>
                </div>


                <!-- GESAMT TOTE -->
                <div>
                    <div class="circle circle-tot circle-gesamttot"
                         style="left: 24%; right: auto; top: auto; bottom: -30px;/* width: 26.312%;*/">
                        <div>
                            <span class="gesamt">Gesamt</span>
                            <br>
                            <span class="gesamtinfo">davon Tote ohne Kongo</span>
                            <br>
                            <span class="gesamtzahl">2288</span></div>
                    </div>

                </div>

                <!-- GUINEA FäLLE -->
                <div>
                    <div class="circle-fall kartenlink circle-guinea-gesamtfall"
                         style="left: 14%; right: auto; top: 20%; bottom: auto; /*width: 9.913%;*/">
                        <div>
                            <span class="land">Guinea</span>
                            <br>
                            <span class="landinfo">Fälle</span>
                            <br>
                            <span class="landzahl">862</span></div>
                    </div>

                </div>

                <!-- GUINEA TOTE -->
                <div>

                    <div class="circle-tot kartenlink circle-guinea-tote"
                         style="left: 21%; right: auto; top: 20%; bottom: 38%; /*width: 6.3825%;*/">
                        <div>
                            <span class="landinfo">Tote</span>
                            <br>
                            <span class="landzahl">555</span></div>
                    </div>

                </div>

                <!-- SIERRA LEONE FäLLE -->
                <div>

                    <div class="circle-fall kartenlink circle-sierra-gesamtfall"
                         style="left: 2%; right: auto; top: auto; bottom: 41%;/* width: 15.6515%;*/">
                        <div>
                            <span class="land">Sierra Leone</span>
                            <br>
                            <span class="landinfo">Fälle</span>
                            <br>
                            <span class="landzahl">1361</span></div>
                    </div>

                </div>

                <!-- SIERRA LEONE TOTE -->
                <div>

                    <div class="circle-tot kartenlink circle-sierra-tote"
                         style="left: 7%; right: auto; top: auto; bottom: 38%; /*width: 6.1295%;*/">
                        <div>
                            <span class="landinfo">Tote</span>
                            <br>
                            <span class="landzahl">533</span></div>
                    </div>

                </div>

                <!-- LIBERIA FäLLE -->
                <div>

                    <div class="circle-fall kartenlink circle-liberia-gesamtfall"
                         style="left: 22%; right: auto; top: auto; bottom: 45%; /*width: 23.529%;*/">
                        <div>
                            <span class="land">Liberia</span>
                            <br>
                            <span class="landinfo">Fälle</span>
                            <br>
                            <span class="landzahl">2046</span></div>
                    </div>

                </div>

                <!-- LIBERIA TOTE -->
                <div>

                    <div class="circle-tot kartenlink circle-liberia-tote"
                         style="left: 26%; right: auto; top: auto; bottom: 38%; /*width: 14.076%;*/">
                        <div>
                            <span class="landinfo">Tote</span>
                            <br>
                            <span class="landzahl">1224</span></div>
                    </div>

                </div>

                <!-- Nigeria FäLLE -->
                <div>

                    <div class="circle-fall kartenlink circle-nigeria-gesamtfall"
                         style="left: auto; right: 48%; top: 36%; bottom: auto; /*width: 6%;*/">
                        <div>
                            <span class="land">Nigeria</span>
                            <br>
                            <span class="landzahl">21</span></div>
                    </div>

                </div>

                <!-- Nigeria TOTE -->
                <div>

                    <div class="circle-tot kartenlink circle-nigeria-tote"
                         style="left: auto; right: 44.5%; top: 38%; bottom: auto; /*width: 4%;*/">
                        <div>
                            <span class="landinfo">Tote</span>
                            <br>
                            <span class="landzahl">8</span></div>
                    </div>

                </div>

                <!-- KONGO FäLLE -->
                <div>

                    <div class="circle-fall kartenlink circle-kongo-gesamtfall"
                         style="left: auto; right: 17%; top: auto; bottom: 36%; /*width: 6%;*/">
                        <div>
                            <span class="land">Kongo</span>
                            <br>
                            <!-- <span class="landinfo">Fälle</span><br/> -->
                            <span class="landzahl">62</span></div>
                    </div>

                </div>

                <!-- Kongo TOTE -->
                <div>

                    <div class="circle-tot kartenlink circle-kongo-tote"
                         style="left: auto; right: 14%; top: auto; bottom: 36%;/* width: 4%;*/">
                        <div>
                            <span class="landinfo">Tote</span>
                            <br>
                            <span class="landzahl">35</span></div>
                    </div>

                </div>

                <!-- SENEGAL FäLLE -->
                <div>
                    <div class="circle-fall kartenlink circle-senegal-gesamtfall"
                         style="left: 1%; right: auto; top: 14%; bottom: auto; /*width: 6%;*/">
                        <div>
                            <span class="land">Senegal</span>
                            <br>
                            <!-- <span class="landinfo">Fälle</span><br/> -->
                            <span class="landzahl">3</span></div>
                    </div>

                </div>

                <!-- SENEGAL TOTE -->
                <div>
                    <div class="circle-tot kartenlink circle-senegal-tote"
                         style="left: 6%; right: auto; top: 15%; bottom: auto; /*width: 4%;*/">
                        <div>
                            <span class="landinfo">Tote</span>
                            <br>
                            <span class="landzahl">0</span></div>
                    </div>

                </div>


            </div>
            </div>
        </div>
    </div>

    <div class="donate" style="display: none">

        <h2>You lost the fight against Ebola!</h2>

        Please help, so we don't lose in reality, too.<br><br>

        Donate to: <br><br>

        <a href="https://www.aerzte-ohne-grenzen.de/online-spenden" target="_blank">Ärzte ohne Grenzen</a><br><br>

        <a href="https://ssl.aktion-deutschland-hilft.de/spenden/spenden" target="_blank">Aktion Deutschland Hilft</a><br><br>

        <a href="https://donate.doctorswithoutborders.org/onetime.cfm" target="_blank">Doctors without Borders</a><br><br>

    </div>

    <div class="about">

        <h2>What is this about?</h2>

        I created this to show how urgent we need to help. <br><br>

        If you want to get into contact: <a href="mailto:whatever@web.de">whatever@web.de</a>    <br><br>

        Graphic taken from: <a href="http://www.spiegel.de/gesundheit/diagnose/karte-verbreitung-von-ebola-in-westafrika-a-983750.html" target="_blank">SPIEGEL ONLINE</a>

    </div>

    <script type="text/javascript">

        (function() {

            const factor = 86.95652;

            var playGoingOn = true;

            var landzahl = document.getElementsByClassName('landzahl');
            var kartenlink = document.getElementsByClassName('kartenlink');
            var gesamtzahl = document.getElementsByClassName('gesamtzahl');
            var circle = document.getElementsByClassName('circle');

            for  (var i = 0; i < landzahl.length; i += 2) {
                kartenlink.item(i).addEventListener('click', fight.bind(null, i), false);
            }

            function fight(i) {
                if (playGoingOn) {

                    var oldAmount = parseInt(landzahl.item(i).innerHTML);
                    var newAmount = Math.max(0, oldAmount - 30);

                    landzahl.item(i).innerHTML = newAmount;
                    kartenlink.item(i).style.width = newAmount / factor + "%";
                    gesamtzahl.item(0).innerHTML = parseInt(gesamtzahl.item(0).innerHTML) - 100;
                }

            }

            setInterval(function () {progress()}, 100);

            function progress() {
                if (playGoingOn) {
                    for  (var i = 0; i < landzahl.length; i += 2) {

                        var progressInfected = Math.ceil(parseInt(landzahl.item(i).innerHTML) * 0.004);
                        var progressDeath =  Math.ceil(parseInt(landzahl.item(i).innerHTML) * 0.002);

                        landzahl.item(i).innerHTML = parseInt(landzahl.item(i).innerHTML) + progressInfected;
                        landzahl.item(i+1).innerHTML = parseInt(landzahl.item(i+1).innerHTML) + progressDeath;

                        kartenlink.item(i).style.width = parseInt(landzahl.item(i).innerHTML) / factor  + "%";
                        kartenlink.item(i+1).style.width = parseInt(landzahl.item(i+1).innerHTML) / factor+ "%";

                        gesamtzahl.item(0).innerHTML = parseInt(gesamtzahl.item(0).innerHTML) + progressInfected;
                        gesamtzahl.item(1).innerHTML = parseInt(gesamtzahl.item(1).innerHTML) + progressDeath;

                        circle.item(0).style.width = parseInt(gesamtzahl.item(0).innerHTML) / factor + "%";
                        circle.item(1).style.width = parseInt(gesamtzahl.item(1).innerHTML) / factor + "%";
                    }

                    if (parseInt(gesamtzahl.item(0).innerHTML) + parseInt(gesamtzahl.item(1).innerHTML) > 15000) {
                        playGoingOn = false;

                        document.getElementsByClassName('karte').item(0).style.display = "none";
                        document.getElementsByClassName('donate').item(0).style.display = "block";

                    }
                }
            }
        })();
    </script>
</body>
</html>
